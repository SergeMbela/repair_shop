name: Deploy Static HTML/JS

on:
  push:
    branches:
      - 'master' # ou 'master', vÃ©rifiez le nom de votre branche principale

permissions:
  contents: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v4

      # C'est ici que la magie opÃ¨re : on crÃ©e un fichier JS avec les secrets
      - name: Create Config File ğŸ”§
        run: |
          echo "window.SUPABASE_URL = '${{ secrets.SUPABASE_URL }}';" > env.js
          echo "window.SUPABASE_KEY = '${{ secrets.SUPABASE_KEY }}';" >> env.js

      - name: Deploy to GitHub Pages ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: . # On dÃ©ploie le dossier racine car c'est du HTML pur